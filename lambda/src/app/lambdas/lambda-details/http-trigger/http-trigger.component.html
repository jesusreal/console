<fd-modal class="fd-modal--large" #httpTriggerModal role="dialog">
  <fd-modal-header>{{ title }}</fd-modal-header>
  <fd-modal-body>
    <div class="tn-modal__header" style="padding-bottom: 5px; padding-top: 5px;">
      <div class="sf-list trigger-entry-list">
        <div>
          <div class="row sf-modal__text sf-list__head">
            <div class="separation col-3">HTTPS-endpoint</div>
            <div class="separation col-7">
              <a class="link" href="{{ httpURL }}" target="_blank">{{ httpURL }}</a>

            </div>
            <div class="col-2">
              <button class="tn-button tn-button--small tn-button--text" (click)=copyHTTPUrlEndpoint()>
                Copy endpoint
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tn-modal__header" style="padding-bottom: 15px; padding-top: 10px;">
      <div style="font-weight: bold; padding-top: 1px; padding-bottom: 5px">
        Security
      </div>
      <div>
        HTTPS endpoint will be exposed securly over the internet
      </div>
      <div style="font-weight: bold; padding-top: 15px;">
        <input type="checkbox" id="secure" [(ngModel)]="secure" checked> <label for="secure">Enable
          Authentication</label>
      </div>
    </div>

      <div class="trigger-footer-left" style="padding-top: 5px; padding-bottom: 5px">
        <section class="sf-section" style="padding-top: 5px; padding-bottom: 5px">
          <div *ngIf="secure" class="expose-section fd-has-margin-bottom-small">
            <div class="row">
              <div class="col-sm-12 input-group">
                <div class="sf-toolbar">
                  <div class="sf-toolbar__header">Identity Provider</div>
                  <div class="sf-toolbar__right">
                    <div *ngIf="secure" class="tn-dropdown" (clickOutside)="autoCloseDropdown()" clickOutsideEvents="click,mousedown">
                      <button fd-button [options]="'light'" (click)="loadPreset()">
                        Fetch token
                      </button>
                      <ul class="tn-dropdown__menu tn-contextual-menu actions-menu text-left idp-presets-dropdown"
                        [attr.aria-hidden]="ariaHidden">
                        <li class="tn-dropdown__item" *ngFor="let preset of availablePresets">
                          <div (click)="selectPreset(preset)" id="{{preset.label}}">{{ preset.label }}</div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div fd-form-set>
              <div fd-form-item>
                <fd-form-label for="input-4">Issuer*</fd-form-label>
                <input fd-form-control [type]="'text'" id="input-4" [(ngModel)]="issuer" (ngModelChange)="validateDetails()" (blur)="validateDetails()" [state]="errorIssuer ? 'invalid' : undefind">
                <fd-form-message [type]="'error'" *ngIf="errorIssuer">
                  {{ errorIssuer }}
                </fd-form-message>
              </div>
            </div>
            <div fd-form-set>
              <div fd-form-item>
                <fd-form-label for="input-5">JWKS URI*</fd-form-label>
                <input fd-form-control [type]="'text'" id="input-5" [(ngModel)]="jwksUri" (ngModelChange)="validateDetails()" (blur)="validateDetails()" [state]="errorJWKSUri ? 'invalid' : undefind">
                <fd-form-message [type]="'error'" *ngIf="errorJWKSUri">
                  {{ errorJWKSUri }}
                </fd-form-message>
            </div>
            </div>
          </div>
          
          <div *ngIf="secure && isDefaultProvider()">
            <button fd-button [options]="'light'" (click)="fetchToken()">
              Fetch token
            </button>
          </div>
                
        </section>
      </div>
  </fd-modal-body>
  <fd-modal-footer>
    <button fd-button [options]="'light'" class="cancel" (click)="closeHttpTriggerModal()">Cancel</button>
    <button fd-button [fdType]="'main'" ngClass="{{secure && !isAbleToMakeRequest() ? '' : 'disabled'}}"
      [disabled]="secure && !isAbleToMakeRequest()" (click)=addTrigger()>Add</button>
  </fd-modal-footer>
</fd-modal>
<app-fetch-token-modal #fetchTokenModal></app-fetch-token-modal>
